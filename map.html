<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Comidas AMICI - Ubicaci√≥n</title>
    <link rel="icon" href="./assets/logo/logo_redondeado.png" type="image/svg+xml" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    
    <style>
        /* ESTILOS GLOBALES */
        @import url('https://fonts.googleapis.com/css2?family=Hanken+Grotesk:ital,wght@0,100..900;1,100..900&display=swap');
        
        :root {
            --color-primary: #a6a182;
            --color-secondary: #1f2120;
            --text-color: #aeb0b4;
            --color-light: #fff;
            --color-divider: #ffffff1a;
            --dark-color-divider: #0e110d;
            --default-font: 'Hanken Grotesk', serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            background-color: #0e110d;
            font-family: var(--default-font);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* HEADER */
        header {
            border-bottom: 1px solid var(--color-divider);
            background-color: #00000060;
            padding: 30px 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }
        
        .header-expand {
            display: flex;
            align-items: center;
            gap: 50px;
        }
        
        .container-logo {
            display: flex;
            align-items: center;
            gap: 20px;
            text-decoration: none;
        }
        
        .container-logo img {
            width: 110px;
            height: 65px;
            object-fit: cover;
        }
        
        .container-logo span {
            color: var(--color-light);
            font-size: 26px;
            font-weight: 600;
        }
        
        nav {
            flex: 1;
            display: flex;
            justify-content: center;
        }
        
        nav ul {
            display: flex;
            align-items: center;
            gap: 40px;
        }
        
        nav ul li {
            list-style: none;
        }
        
        nav ul li a {
            color: var(--color-light);
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: var(--color-primary);
        }
        
        .btn-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--color-light);
            font-size: 24px;
            cursor: pointer;
        }
        
        /* HERO SECTION */
        .background-container-hero {
            background-image: linear-gradient(rgba(10, 10, 10, 0.85), rgba(10, 10, 10, 0.85)), url(../images/home/hero-bg.jpg);
            background-size: cover;
            background-position: center;
            height: 65vh;
            background-attachment: fixed;
            display: flex;
            align-items: center;
            margin-top: 120px;
        }
        
        .background-container-hero .container {
            text-align: center;
        }
        
        .background-container-hero h1 {
            color: var(--color-light);
            font-size: 62px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 20px;
        }
        
        .background-container-hero p {
            font-size: 18px;
        }
        
        .background-container-hero a {
            color: var(--text-color);
            text-decoration: none;
        }
        
        .background-container-hero a:hover {
            text-decoration: underline;
        }
        
        /* MAIN CONTENT */
        main {
            padding: 80px 0;
        }
        
        /* MAP SECTION */
        .container-map {
            margin: 40px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .container-map iframe {
            width: 100%;
            height: 500px;
            border: none;
            display: block;
        }
        
        /* MAP CONTROLS */
        .map-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .map-btn {
            background-color: var(--color-primary);
            color: var(--color-light);
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }
        
        .map-btn:hover {
            background-color: var(--color-light);
            color: var(--color-secondary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(166, 161, 130, 0.4);
        }
        
        .map-btn i {
            font-size: 20px;
        }
        
        .btn-3d {
            background: linear-gradient(135deg, #a6a182, #8a8669);
            font-weight: 700;
        }
        
        .btn-3d:hover {
            background: linear-gradient(135deg, var(--color-light), #e0dcc5);
        }
        
        .btn-directions {
            background-color: var(--color-secondary);
        }
        
        .btn-get-location {
            background: linear-gradient(135deg, #2c3e50, #3498db);
        }
        
        /* LOCATION INFO */
        .location-info {
            background-color: var(--color-secondary);
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
        }
        
        .location-info h2 {
            color: var(--color-primary);
            font-size: 28px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .info-item i {
            color: var(--color-primary);
            font-size: 24px;
            width: 40px;
        }
        
        .info-content h3 {
            color: var(--color-light);
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .info-content p {
            color: var(--text-color);
            font-size: 16px;
        }
        
        /* STREET VIEW PREVIEW */
        .street-view-container {
            margin: 40px 0;
            text-align: center;
        }
        
        .street-view-container h2 {
            color: var(--color-light);
            font-size: 28px;
            margin-bottom: 20px;
        }
        
        .street-view-preview {
            width: 100%;
            max-width: 800px;
            height: 400px;
            margin: 0 auto;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://maps.googleapis.com/maps/api/streetview?size=800x400&location=-31.3073007,-64.4632021&fov=90&heading=235&pitch=10');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .street-view-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
        
        .street-view-preview > * {
            position: relative;
            z-index: 2;
        }
        
        .street-view-preview h3 {
            color: var(--color-light);
            font-size: 24px;
        }
        
        .street-view-preview p {
            color: var(--text-color);
            font-size: 16px;
            max-width: 600px;
            padding: 0 20px;
        }
        
        /* FOOTER */
        footer {
            background-color: var(--dark-color-divider);
            padding: 60px 0 20px;
            margin-top: 60px;
        }
        
        footer .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }
        
        footer .container-logo img {
            width: 150px;
            height: 70px;
            filter: brightness(0) invert(1);
        }
        
        footer .container-logo span {
            font-size: 28px;
            font-weight: 700;
            color: var(--color-primary);
        }
        
        footer ul {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        footer ul li {
            list-style: none;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        footer ul li i {
            color: var(--color-primary);
            font-size: 18px;
        }
        
        footer ul li span {
            font-size: 16px;
        }
        
        .container-social-copyright {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .container-social-copyright p {
            font-size: 14px;
            color: var(--text-color);
        }
        
        .container-social-copyright a {
            color: white;
        }
        
        /* RESPONSIVE */
        @media (max-width: 992px) {
            .header-expand {
                justify-content: space-between;
            }
            
            nav {
                display: none;
            }
            
            .btn-toggle {
                display: block;
            }
            
            .background-container-hero {
                height: 50vh;
                margin-top: 100px;
            }
            
            .background-container-hero h1 {
                font-size: 48px;
            }
            
            .map-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .map-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            footer .content {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .background-container-hero {
                height: 40vh;
                margin-top: 80px;
            }
            
            .background-container-hero h1 {
                font-size: 36px;
            }
            
            .container-logo span {
                font-size: 20px;
            }
            
            .container-map iframe {
                height: 400px;
            }
            
            .container-social-copyright {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .street-view-preview {
                height: 300px;
            }
        }
        
        @media (max-width: 480px) {
            .background-container-hero h1 {
                font-size: 28px;
            }
            
            .container-map iframe {
                height: 300px;
            }
            
            .map-btn {
                padding: 12px 20px;
                font-size: 14px;
            }
            
            .location-info {
                padding: 20px;
            }
        }
        
        /* MENU RESPONSIVE */
        .menu-responsive {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: var(--color-primary);
            display: none;
            flex-direction: column;
            padding: 20px;
            z-index: 1000;
        }
        
        .menu-responsive.active {
            display: flex;
        }
        
        .menu-responsive ul {
            flex-direction: column;
            gap: 15px;
        }
        
        .menu-responsive ul li a {
            color: var(--color-light);
            font-size: 18px;
            padding: 10px 0;
            display: block;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .menu-responsive ul li:last-child a {
            border-bottom: none;
        }
        
        /* LOCATION MESSAGE */
        .location-message {
            margin-top: 10px;
            padding: 15px;
            background: rgba(166, 161, 130, 0.1);
            border-radius: 8px;
            display: none;
            text-align: center;
            font-size: 14px;
        }
        
        .location-message.show {
            display: block;
        }
        
        .location-message.error {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
            border-left: 4px solid #e74c3c;
        }
        
        .location-message.success {
            background: rgba(46, 204, 113, 0.1);
            color: #2ecc71;
            border-left: 4px solid #2ecc71;
        }
        
        .location-message.info {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
            border-left: 4px solid #3498db;
        }
        
        /* MODAL PARA MOSTRAR RECORRIDO */
        .route-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .route-modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--color-secondary);
            border-radius: 15px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
            position: relative;
        }
        
        .modal-header {
            background: var(--color-primary);
            color: var(--color-light);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: var(--color-light);
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .route-map-container {
            width: 100%;
            height: 500px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .route-map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .route-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .route-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .route-item i {
            color: var(--color-primary);
            font-size: 20px;
        }
        
        .route-item div {
            flex: 1;
        }
        
        .route-item .label {
            font-size: 12px;
            color: var(--text-color);
            margin-bottom: 5px;
        }
        
        .route-item .value {
            font-size: 16px;
            color: var(--color-light);
            font-weight: 600;
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 12px 25px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .modal-btn-primary {
            background: var(--color-primary);
            color: var(--color-light);
        }
        
        .modal-btn-secondary {
            background: var(--color-secondary);
            color: var(--color-light);
            border: 1px solid var(--color-primary);
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* LOADING SPINNER */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--color-primary);
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="container header-expand">
            <div class="container-logo">
                <img src="./assets/logo/logo_redondeado.png" alt="Logo AMICI" />
                <span>Comidas AMICI</span>
            </div>

            <nav>
                <ul>
                    <li><a href="index.html#menu_amici">VER MEN√ö</a></li>
                    <li><a href='index_form_ubicaci√≥n.html'>CONTACTO</a></li>
                    <li><a href='map.html'>UBICACI√ìN</a></li>
                </ul>
            </nav>

            <button class="btn-toggle" id="menuToggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
        
        <!-- MEN√ö RESPONSIVE -->
        <div class="menu-responsive" id="responsiveMenu">
            <ul>
                <li><a href="index.html#menu_amici">VER MEN√ö</a></li>
                <li><a href='index_form_ubicaci√≥n.html'>CONTACTO</a></li>
                <li><a href='map.html'>UBICACI√ìN</a></li>
            </ul>
        </div>
    </header>

    <!-- HERO SECTION -->
    <section class="background-container-hero">
        <div class="container">
            <h1>Nuestra Ubicaci√≥n</h1>
            <p>
                <a href='index.html'>Inicio</a> / <span>Ubicaci√≥n</span>
            </p>
        </div>
    </section>

    <!-- MAIN CONTENT -->
    <main class="container">
        <!-- MAPA EMBEBIDO -->
        <section class="container-map">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d6817.6959124335435!2d-64.46668851069397!3d-31.307947198104166!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMzHCsDE4JzI2LjIiUyA2NMKwMjcnNDguMCJX!5e0!3m2!1ses!2sar!4v1765820066938!5m2!1ses!2sar" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </section>

        <!-- CONTROLES DEL MAPA -->
        <div class="map-controls">
            <!-- BOT√ìN INTELIGENTE CON GEOLOCALIZACI√ìN -->
            <button type="button" class="map-btn btn-directions" id="getDirectionsBtn">
                <i class="fas fa-directions"></i>
                Ver recorrido desde mi ubicaci√≥n
            </button>
            
            <a href="https://www.google.com/maps/place/AMICI+pizza+y+lomos/@-31.3074574,-64.4633237,3a,75y,51.42h,93.05t/data=!3m7!1e1!3m5!1sS7tINPoBRRVwuR9i01qZmw!2e0!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fcb_client%3Dmaps_sv.tactile%26w%3D900%26h%3D600%26pitch%3D-3.051350058122196%26panoid%3DS7tINPoBRRVwuR9i01qZmw%26yaw%3D51.421320818227734!7i16384!8i8192!4m15!1m8!3m7!1s0x942d6550e7718de5:0x101de55630bce728!2sAMICI+pizza+y+lomos!8m2!3d-31.3073007!4d-64.4632021!10e1!16s%2Fg%2F11s_z0gg11!3m5!1s0x942d6550e7718de5:0x101de55630bce728!8m2!3d-31.3073007!4d-64.4632021!16s%2Fg%2F11s_z0gg11?entry=ttu&g_ep=EgoyMDI2MDEwNy.0IKXMDSoASAFQAw%3D%3D" 
               target="_blank" 
               class="map-btn btn-3d">
                <i class="fas fa-street-view"></i>
                Ver en 3D / Street View
            </a>
            
            <a href="https://wa.me/543541387884?text=Hola%20AMICI,%20quiero%20hacer%20un%20pedido%20üìç" 
               target="_blank" 
               class="map-btn">
                <i class="fab fa-whatsapp"></i>
                Pedir por WhatsApp
            </a>
        </div>

        <!-- MENSAJE DE UBICACI√ìN -->
        <div class="location-message" id="locationMessage"></div>

        <!-- INFORMACI√ìN DE UBICACI√ìN -->
        <section class="location-info">
            <h2><i class="fas fa-map-marker-alt"></i> Informaci√≥n del Local</h2>
            <div class="info-grid">
                <div class="info-item">
                    <i class="fas fa-map-pin"></i>
                    <div class="info-content">
                        <h3>Direcci√≥n</h3>
                        <p>Av. Roque S√°enz Pe√±a 47, Bialet Mass√©, C√≥rdoba</p>
                    </div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <div class="info-content">
                        <h3>Horarios</h3>
                        <p>Lunes a Domingos: 12:00 - 00:00 hrs</p>
                    </div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-phone"></i>
                    <div class="info-content">
                        <h3>Tel√©fono</h3>
                        <p>+54 3541-387884</p>
                    </div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-whatsapp"></i>
                    <div class="info-content">
                        <h3>WhatsApp</h3>
                        <p>+54 3541-387884 (Pedidos)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- PREVIEW STREET VIEW -->
        <section class="street-view-container">
            <h2>Vista Previa del Local</h2>
            <div class="street-view-preview">
                <h3>AMICI Pizza y Lomos</h3>
                <p>As√≠ se ve nuestro local desde la calle. Haz clic en el bot√≥n "Ver en 3D" para explorar en 360¬∞</p>
                <a href="https://www.google.com/maps/place/AMICI+pizza+y+lomos/@-31.3074574,-64.4633237,3a,75y,51.42h,93.05t/data=!3m7!1e1!3m5!1sS7tINPoBRRVwuR9i01qZmw!2e0!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fcb_client%3Dmaps_sv.tactile%26w%3D900%26h%3D600%26pitch%3D-3.051350058122196%26panoid%3DS7tINPoBRRVwuR9i01qZmw%26yaw%3D51.421320818227734!7i16384!8i8192!4m15!1m8!3m7!1s0x942d6550e7718de5:0x101de55630bce728!2sAMICI+pizza+y+lomos!8m2!3d-31.3073007!4d-64.4632021!10e1!16s%2Fg%2F11s_z0gg11!3m5!1s0x942d6550e7718de5:0x101de55630bce728!8m2!3d-31.3073007!4d-64.4632021!16s%2Fg%2F11s_z0gg11?entry=ttu&g_ep=EgoyMDI2MDEwNy.0IKXMDSoASAFQAw%3D%3D" 
                   target="_blank" 
                   class="map-btn">
                    <i class="fas fa-external-link-alt"></i>
                    Abrir Vista 360¬∞ Completa
                </a>
            </div>
        </section>
    </main>

    <!-- MODAL PARA MOSTRAR RECORRIDO -->
    <div class="route-modal" id="routeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-route"></i> Recorrido hasta AMICI</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="route-map-container">
                    <iframe id="routeMap" frameborder="0" allowfullscreen></iframe>
                </div>
                
                <div class="route-info" id="routeInfo">
                    <!-- Se llena din√°micamente con JavaScript -->
                </div>
                
                <div class="modal-actions">
                    <button class="modal-btn modal-btn-primary" id="openInMaps">
                        <i class="fas fa-external-link-alt"></i>
                        Abrir en Google Maps
                    </button>
                    <button class="modal-btn modal-btn-secondary" id="shareRoute">
                        <i class="fas fa-share"></i>
                        Compartir ruta
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="background-dark-1">
        <div class="container">
            <div class="content">
                <div class="container-logo">
                    <img src="./assets/logo/logo.png" alt="Logo AMICI" />
                    <span>Comidas AMICI</span>
                </div>

                <ul>
                    <li>
                        <i class="fa-solid fa-location-dot"></i>
                        <span>Av. Roque S√°enz Pe√±a 47, Bialet Mass√©</span>
                    </li>
                    <li>
                        <i class="fa-solid fa-phone"></i>
                        <span>3541-387884</span>
                    </li>
                </ul>
            </div>

            <div class="container-social-copyright">
                <p>&copy; 2025 SsnkCode. Todos los derechos reservados. 
                   <span><a href="https://wa.me/543541682310">3541682310</a></span>
                </p>
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT COMPLETO -->
    <script>
        // COORDENADAS DE AMICI
        const AMICI_COORDINATES = {
            name: "AMICI Pizza y Lomos",
            lat: -31.3073007,
            lng: -64.4632021,
            address: "Av. Roque S√°enz Pe√±a 47, Bialet Mass√©, C√≥rdoba, Argentina",
            phone: "+54 3541-387884",
            whatsapp: "543541387884",
            placeId: "ChIJd7TvpI3zCpMRcWtPwXv_W-w",
            streetViewUrl: "https://www.google.com/maps/place/AMICI+pizza+y+lomos/@-31.3074574,-64.4633237,3a,75y,51.42h,93.05t/data=!3m7!1e1!3m5!1sS7tINPoBRRVwuR9i01qZmw!2e0!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fcb_client%3Dmaps_sv.tactile%26w%3D900%26h%3D600%26pitch%3D-3.051350058122196%26panoid%3DS7tINPoBRRVwuR9i01qZmw%26yaw%3D51.421320818227734!7i16384!8i8192!4m15!1m8!3m7!1s0x942d6550e7718de5:0x101de55630bce728!2sAMICI+pizza+y+lomos!8m2!3d-31.3073007!4d-64.4632021!10e1!16s%2Fg%2F11s_z0gg11!3m5!1s0x942d6550e7718de5:0x101de55630bce728!8m2!3d-31.3073007!4d-64.4632021!16s%2Fg%2F11s_z0gg11?entry=ttu&g_ep=EgoyMDI2MDEwNy.0IKXMDSoASAFQAw%3D%3D"
        };

        // Variables globales
        let userLocation = null;
        let currentRouteUrl = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Elementos del DOM
            const menuToggle = document.getElementById('menuToggle');
            const responsiveMenu = document.getElementById('responsiveMenu');
            const getDirectionsBtn = document.getElementById('getDirectionsBtn');
            const locationMessage = document.getElementById('locationMessage');
            const routeModal = document.getElementById('routeModal');
            const closeModal = document.getElementById('closeModal');
            const routeMap = document.getElementById('routeMap');
            const routeInfo = document.getElementById('routeInfo');
            const openInMapsBtn = document.getElementById('openInMaps');
            const shareRouteBtn = document.getElementById('shareRoute');
            
            // TOGGLE MENU RESPONSIVE
            menuToggle.addEventListener('click', function() {
                responsiveMenu.classList.toggle('active');
                const icon = menuToggle.querySelector('i');
                if (responsiveMenu.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
            
            // Cerrar men√∫ al hacer clic en un enlace
            const menuLinks = responsiveMenu.querySelectorAll('a');
            menuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    responsiveMenu.classList.remove('active');
                    menuToggle.querySelector('i').classList.remove('fa-times');
                    menuToggle.querySelector('i').classList.add('fa-bars');
                });
            });
            
            // CERRAR MODAL
            closeModal.addEventListener('click', function() {
                routeModal.classList.remove('active');
            });
            
            // Cerrar modal al hacer clic fuera
            routeModal.addEventListener('click', function(e) {
                if (e.target === routeModal) {
                    routeModal.classList.remove('active');
                }
            });
            
            // ABRIR EN GOOGLE MAPS
            openInMapsBtn.addEventListener('click', function() {
                if (currentRouteUrl) {
                    window.open(currentRouteUrl, '_blank');
                }
            });
            
            // COMPARTIR RUTA
            shareRouteBtn.addEventListener('click', function() {
                if (currentRouteUrl) {
                    if (navigator.share) {
                        navigator.share({
                            title: 'Ruta a AMICI Pizza y Lomos',
                            text: '¬°Mira el recorrido para llegar a AMICI!',
                            url: currentRouteUrl
                        });
                    } else {
                        navigator.clipboard.writeText(currentRouteUrl)
                            .then(() => {
                                showMessage('‚úÖ Enlace copiado al portapapeles', 'success');
                            })
                            .catch(() => {
                                prompt('Copiar este enlace:', currentRouteUrl);
                            });
                    }
                }
            });
            
            // BOT√ìN PRINCIPAL: VER RECORRIDO DESDE MI UBICACI√ìN
            getDirectionsBtn.addEventListener('click', function() {
                const btn = this;
                const originalText = btn.innerHTML;
                
                // Mostrar mensaje de carga
                showMessage('<span class="spinner"></span> Detectando tu ubicaci√≥n...', 'info');
                btn.disabled = true;
                btn.innerHTML = '<span class="spinner"></span> Detectando ubicaci√≥n...';
                
                // Verificar si el navegador soporta geolocalizaci√≥n
                if (!navigator.geolocation) {
                    showMessage('‚ùå Tu navegador no soporta geolocalizaci√≥n.', 'error');
                    fallbackToManualRoute();
                    btn.disabled = false;
                    btn.innerHTML = originalText;
                    return;
                }
                
                // Pedir ubicaci√≥n actual
                navigator.geolocation.getCurrentPosition(
                    // √âXITO: Obtener coordenadas del usuario
                    function(position) {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                            accuracy: position.coords.accuracy
                        };
                        
                        showMessage('‚úÖ Ubicaci√≥n detectada. Calculando ruta...', 'success');
                        
                        // Calcular distancia y tiempo
                        const distance = calculateDistance(
                            userLocation.lat, 
                            userLocation.lng,
                            AMICI_COORDINATES.lat,
                            AMICI_COORDINATES.lng
                        );
                        
                        // Crear URL de Google Maps con ruta visual
                        currentRouteUrl = createRouteUrl(userLocation, AMICI_COORDINATES);
                        
                        // Crear iframe para mostrar el mapa con la ruta
                        const mapUrl = createEmbeddedRouteUrl(userLocation, AMICI_COORDINATES);
                        routeMap.src = mapUrl;
                        
                        // Mostrar informaci√≥n de la ruta
                        updateRouteInfo(distance, userLocation);
                        
                        // Mostrar el modal con el recorrido
                        setTimeout(() => {
                            routeModal.classList.add('active');
                            btn.disabled = false;
                            btn.innerHTML = originalText;
                            showMessage('‚úÖ Ruta calculada. Mira el recorrido arriba.', 'success');
                        }, 500);
                        
                        // Guardar en localStorage para futuras visitas
                        localStorage.setItem('last_user_location', JSON.stringify(userLocation));
                    },
                    // ERROR: No se pudo obtener ubicaci√≥n
                    function(error) {
                        let errorMsg = "No se pudo obtener tu ubicaci√≥n. ";
                        
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMsg = "üìç Permiso denegado. Para ver el recorrido personalizado, por favor permite el acceso a tu ubicaci√≥n en la configuraci√≥n del navegador.";
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMsg = "üìç Ubicaci√≥n no disponible. Aseg√∫rate de tener el GPS activado o conectarte a WiFi.";
                                break;
                            case error.TIMEOUT:
                                errorMsg = "üìç Tiempo de espera agotado. Intenta nuevamente.";
                                break;
                            default:
                                errorMsg = "üìç Error desconocido al obtener la ubicaci√≥n.";
                        }
                        
                        showMessage(`‚ùå ${errorMsg}`, 'error');
                        
                        // Ofrecer alternativa
                        setTimeout(() => {
                            if (confirm("¬øQuieres ver una ruta de ejemplo desde el centro de la ciudad?")) {
                                showExampleRoute();
                            }
                        }, 1000);
                        
                        btn.disabled = false;
                        btn.innerHTML = originalText;
                    },
                    // OPCIONES de geolocalizaci√≥n
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            });
            
            // FUNCI√ìN PARA MOSTRAR RUTA DE EJEMPLO
            function showExampleRoute() {
                // Coordenadas del centro de Bialet Mass√© como ejemplo
                const exampleLocation = {
                    lat: -31.308000,
                    lng: -64.465000,
                    name: "Centro de Bialet Mass√©"
                };
                
                userLocation = exampleLocation;
                
                const distance = calculateDistance(
                    exampleLocation.lat,
                    exampleLocation.lng,
                    AMICI_COORDINATES.lat,
                    AMICI_COORDINATES.lng
                );
                
                currentRouteUrl = createRouteUrl(exampleLocation, AMICI_COORDINATES);
                const mapUrl = createEmbeddedRouteUrl(exampleLocation, AMICI_COORDINATES);
                routeMap.src = mapUrl;
                
                updateRouteInfo(distance, exampleLocation);
                routeModal.classList.add('active');
                
                showMessage('üìç Mostrando ruta de ejemplo desde el centro.', 'info');
            }
            
            // FUNCI√ìN PARA CREAR URL DE RUTA PARA IFRAME
            function createEmbeddedRouteUrl(origin, destination) {
                // URL especial para iframe con ruta visible
                return `https://www.google.com/maps/embed/v1/directions?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&origin=${origin.lat},${origin.lng}&destination=${destination.lat},${destination.lng}&mode=driving&language=es`;
            }
            
            // FUNCI√ìN PARA CREAR URL DE RUTA PARA GOOGLE MAPS
            function createRouteUrl(origin, destination) {
                return `https://www.google.com/maps/dir/?api=1` +
                       `&origin=${origin.lat},${origin.lng}` +
                       `&destination=${destination.lat},${destination.lng}` +
                       `&destination_place_id=${destination.placeId}` +
                       `&travelmode=driving`;
            }
            
            // FUNCI√ìN PARA ACTUALIZAR INFORMACI√ìN DE LA RUTA
            function updateRouteInfo(distance, origin) {
                const time = Math.round(distance.km * 2.5); // Estimaci√≥n: 2.5 min por km
                
                routeInfo.innerHTML = `
                    <div class="route-item">
                        <i class="fas fa-route"></i>
                        <div>
                            <div class="label">DISTANCIA</div>
                            <div class="value">${distance.km.toFixed(1)} km</div>
                        </div>
                    </div>
                    <div class="route-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <div class="label">TIEMPO ESTIMADO</div>
                            <div class="value">${time} minutos</div>
                        </div>
                    </div>
                    <div class="route-item">
                        <i class="fas fa-gas-pump"></i>
                        <div>
                            <div class="label">COMBUSTIBLE</div>
                            <div class="value">~${(distance.km * 0.1).toFixed(1)} L</div>
                        </div>
                    </div>
                    <div class="route-item">
                        <i class="fas fa-car"></i>
                        <div>
                            <div class="label">MODO</div>
                            <div class="value">En auto</div>
                        </div>
                    </div>
                `;
            }
            
            // FUNCI√ìN PARA CALCULAR DISTANCIA
            function calculateDistance(lat1, lon1, lat2, lon2) {
                const R = 6371; // Radio de la Tierra en km
                const dLat = (lat2 - lat1) * Math.PI / 180;
                const dLon = (lon2 - lon1) * Math.PI / 180;
                
                const a = 
                    Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                    Math.sin(dLon/2) * Math.sin(dLon/2);
                
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                const km = R * c;
                
                return { km };
            }
            
            // FUNCI√ìN PARA MOSTRAR MENSAJES
            function showMessage(text, type = "info") {
                locationMessage.innerHTML = text;
                locationMessage.className = "location-message show " + type;
                
                // Ocultar mensaje despu√©s de 5 segundos
                setTimeout(() => {
                    locationMessage.classList.remove("show");
                }, 5000);
            }
            
            // RUTA DE RESPUESTA (sin ubicaci√≥n)
            function fallbackToManualRoute() {
                currentRouteUrl = `https://www.google.com/maps/dir/?api=1&destination=${AMICI_COORDINATES.lat},${AMICI_COORDINATES.lng}`;
                window.open(currentRouteUrl, '_blank');
            }
            
            // HEADER SCROLL EFFECT
            let lastScroll = 0;
            const header = document.querySelector('header');
            
            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                
                if (currentScroll <= 0) {
                    header.style.transform = 'translateY(0)';
                    return;
                }
                
                if (currentScroll > lastScroll && currentScroll > 100) {
                    header.style.transform = 'translateY(-100%)';
                } else if (currentScroll < lastScroll) {
                    header.style.transform = 'translateY(0)';
                }
                
                lastScroll = currentScroll;
            });
            
            // Guardar coordenadas en localStorage
            localStorage.setItem('amici_coordinates', JSON.stringify(AMICI_COORDINATES));
            
            // Intentar cargar ubicaci√≥n anterior
            try {
                const lastLocation = localStorage.getItem('last_user_location');
                if (lastLocation) {
                    userLocation = JSON.parse(lastLocation);
                }
            } catch (e) {
                console.log('No se pudo cargar ubicaci√≥n anterior');
            }
            
            // BOT√ìN ALTERNATIVO FIJO
            // const addFixedButton = true;
            // if (addFixedButton) {
            //     const fixedBtn = document.createElement('a');
            //     fixedBtn.href = `https://www.google.com/maps/dir/?api=1&destination=${AMICI_COORDINATES.lat},${AMICI_COORDINATES.lng}`;
            //     fixedBtn.target = "_blank";
            //     fixedBtn.className = "map-btn";
            //     fixedBtn.innerHTML = '<i class="fas fa-map-signs"></i> Ver ruta sin mi ubicaci√≥n';
            //     fixedBtn.style.marginTop = '10px';
            //     fixedBtn.style.width = '100%';
            //     fixedBtn.style.maxWidth = '300px';
            //     fixedBtn.style.justifyContent = 'center';
            //     document.querySelector('.map-controls').appendChild(fixedBtn);
            // }
        });
    </script>
	<script src="./js/js_map/partials.js"></script>
</body>
</html>























